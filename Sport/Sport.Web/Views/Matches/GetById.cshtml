@model MatchScoreViewModel

@using System.Web.Mvc.Ajax
@using System.Web.Mvc
@using Microsoft.AspNet.Identity


@{
    ViewData["Title"] = "Details";
}


<script>
    var arr = ["0", "15", "30", "40", "Ad"];
   
</script>

<link rel="stylesheet" type="text/css" href="~/css/Score.css">

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>


<form asp-controller="Matches" asp-action="ChangeResult"
      data-ajax-method="POST"
      data-ajax="true">
</form>

<table class="table table-bordered table-hover">
    <thead>
        <tr>
            <th>
                Player Name
            </th>
            <th>
                Sets
            </th>
            <th>
                Games
            </th>
            <th>
                Points
            </th>
            <th>
                Tie Break Points
            </th>
        </tr>
    </thead>

    <tbody>
        <tr>
            <th id="firstPlayerName">
                @Model.FirstPlayer.FirstName
            </th>
            <th id="setsFirstPlayer">

            </th>
            <th id="gamesFirstPlayer">

            </th>
            <th id="pointsFirstPlayer">

            </th>

            <th id="tieBreakPointsFirstPlayer"  class="tieBreak">

            </th>

        </tr>
        <tr>
            <th>
                @Model.SecondPlayer.FirstName
            </th>
            <th id="setsSecondPlayer">

            </th>
            <th id="gamesSecondPlayer" value="">

            </th>
            <th id="pointsSecondPlayer">

            </th>
            <th  id="tieBreakPointsSecondPlayer" class="tieBreak">

            </th>
        </tr>

    </tbody>
</table>



<section class="sectionScore">
    <span id="spanPointsFirstPlayer" class="span" align="center">
        @*@Model.FirstPlayerPoints*@
    </span>

    <span class="span"> / </span>

    <span id="spanPointsSecondPlayer" class="span">
        @*@Model.MatchResult.SecondPlayerPoints*@
    </span>
</section>

<section class="section">
    <button class="button" id="firstButtonId">Add First Player Point</button>
    <button class="button" id="secondButtonId">Add Second Player Point</button>
</section>


<script type="text/javascript">
    $(".button").click(function (e) {
        var tieBreak;
       e.preventDefault();
        $.ajax({
            type: "POST",
            url: '@Html.Raw(Url.Action("ChangeResult", "Matches"))',
            data: {
                        buttonId: this.id,
                        matchId : @Model.Id,

            },
            dataType: "json",
            success: function (data) {
                  $("#setsFirstPlayer").html(data.firstPlayerSets),
                  $("#setsSecondPlayer").html(data.secondPlayerSets),
                  $("#gamesFirstPlayer").html(data.firstPlayerGames),
                  $("#gamesSecondPlayer").html(data.secondPlayerGames),
                  $("#pointsFirstPlayer").html(arr[data.firstPlayerPoints]),
                  $("#pointsSecondPlayer").html(arr[data.secondPlayerPoints])    ,            

                console.log(data)
            },
            error: function (data) {
                console.log(data),
                alert("error")
            }
        });
    });
</script>
