@model MatchScoreViewModel

@using System.Web.Mvc.Ajax
@using System.Web.Mvc
@using Microsoft.AspNet.Identity

@{
    ViewData["Title"] = "Details";
}

<h1>@ViewData["Title"]</h1>


<link rel="stylesheet" type="text/css" href="~/css/Score.css">

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

<form asp-controller="Matches" asp-action="ChangeResult"
      data-ajax-method="POST"
      data-ajax="true">
</form>

<table class="table table-bordered table-hover">
    <thead>
        <tr>
            <th>
                Player Name
            </th>
            <th>
                Sets
            </th>
            <th>
                Games
            </th>
            <th>
                Points
            </th>
            <th>
                Tie Break Points
            </th>
        </tr>
    </thead>

    <tbody>
        @*<tr>
            <th>
                @Model.
            </th>
            <th id="setsFirstPlayer">
                @Model.MatchResult.FirstPlayerSets
            </th>
            <th id="gamesFirstPlayer">
                @Model.MatchResult.FirstPlayerGames
            </th>
            <th id="pointsFirstPlayer">
                @Model.MatchResult.FirstPlayerPoints
            </th>

            <th id="tieBreakPointsFirstPlayer">
                @Model.MatchResult.FirstPlayerTieBreakPoints
            </th>

        </tr>
        <tr>
            <th>
                @Model.SecondPlayer.FirstName
            </th>
            <th id="setsSecondPlayer">
                @Model.MatchResult.SecondPlayerSets
            </th>
            <th id="gamesSecondPlayer">
                @Model.MatchResult.SecondPlayerGames
            </th>
            <th id="pointsSecondPlayer">
                @Model.MatchResult.SecondPlayerPoints
            </th>
            <th id="tieBreakPointsSecondPlayer">
                @Model.MatchResult.SecondPlayerTieBreakPoints
            </th>
        </tr>*@

    </tbody>
</table>



@if (User.Identity.GetUserId() == Model. UmpireId)
{
    <section class="sectionScore">
        <span id="spanPointsFirstPlayer" class="span" align="center">
            @*@Model.FirstPlayerPoints*@
        </span>

        <span class="span"> / </span>

        <span id="spanPointsSecondPlayer" class="span">
            @*@Model.MatchResult.SecondPlayerPoints*@
        </span>
    </section>

    <section class="section">
        <button class="button" id="firstButtonId">Add First Player Point</button>
        <button class="button" id="secondButtonId">Add Second Player Point</button>
    </section>
}


<script type="text/javascript">
   $(".button").click(function (e) {
        e.preventDefault();
        $.ajax({
            type: "POST",
            url: '@Html.Raw(Url.Action("ChangeResult", "Matches"))',
            data: {
                        buttonId: this.id,
                        matchId : @Model.Id,

                        @*firstPlayerPoints: @Model.FirstPlayerPoints,
                        firstPlayerGames : @Model.FirstPlayerGames,
                        firstPlayerSets: @Model.FirstPlayerSets,
                        firstPlayerTieBreakPoints :@Model.FirstPlayerTieBreakPoints,
                        secondPlayerPoints : @Model.SecondPlayerPoints,
                        secondPlayerGames: @Model.SecondPlayerGames,
                        secondPlayerSets : @Model.SecondPlayerSets,
                        secondPlayerTieBreakPoints:@Model.SecondPlayerTieBreakPoints,*@
            },
            dataType: "json",
            success: function (msg) {
                    $("#spanPointsFirstPlayer").html(msg.firstPlayerPoints),
                    $("#pointsFirstPlayer").html(msg.firstPlayerPoints),
                    $("#gamesFirstPlayer").html(msg.firstPlayerGames),
                    $("#setsFirstPlayer").html(msg.firstPlayerSets),
                    $("#spanPointsSecondPlayer").html(msg.secondPlayerPoints),
                    $("#pointsSecondPlayer").html(msg.secondPlayerPoints),
                    $("#gamesSecondPlayer").html(msg.secondPlayerGames),
                    $("#setsSecondPlayer").html(msg.secondPlayerSets),
                    $("#tieBreakPointsFirstPlayer").html(msg.firstPlayerTieBreakPoints),
                    $("#tieBreakPointsSecondPlayer").html(msg.secondPlayerTieBreakPoints)
            },
            error: function () {
                alert('error');
            }
        });
    });

</script>
